<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DashBoard</title>
    <script src="../js/funcoes.js"></script>
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Play&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="../assets/iconHobbizSemFundo.png" />
</head>

<body>
    <div class="navbar">
        <a href="../index.html">
            <div class="navbarImg"><img src="../assets/Hobbiz.png" onmouseover='this.src="../assets/HobbizAzul.png"'
                    onmouseout="this.src='../assets/Hobbiz.png'">
            </div>
        </a>
        <div class="nomeUsuario" id="nomeUsuario"></div>
        <div class="botoesNavbar">
            <div class="loginNavbar"><button onclick="limparSessao()">Sair</button></div>
        </div>
    </div>
    <div class="sessaoUm">
        <div class="sessaoUmCoisas">
            <div id="divBotaoUm" class="moduloDash">
                <button id="botaoUm" onclick="mostrarBotoes()">+</button>
                <div id="div1" class="coisasModuloDash">
                    <div id="div1Titulo" class="eixoTitulo">
                        <p>Adicione um novo hobby</p>
                    </div>
                    <div class="eixo">
                        <div class="eixo1">
                            <div class="eixoInputs">
                                <p>Titulo:</p><input id="hobbyINPUT1">
                            </div>
                            <div class="eixoInputs">
                                <div class="dataHora">
                                    <p>Dia</p><input id="diaINPUT1">
                                    <p>Hora</p><input id="horaINPUT1">
                                </div>
                            </div>
                        </div>
                        <div class="eixo2">
                            <div class="eixoInputs">
                                <p>Duração:</p><input id="duracaoINPUT1">
                            </div>
                            <div class="eixoInputs"><button onclick="executarInput1()">+</button></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="divBotaoDois" style="visibility: hidden; transition: all 1s;" class="moduloDash">
                <button id="botaoDois" onclick="mostrarBotoes()">+</button>
                <div id="div2" class="coisasModuloDash">
                    <div id="div2Titulo" class="eixoTitulo">
                        <p>Adicione um novo hobby</p>
                    </div>
                    <div class="eixo">
                        <div class="eixoInputs"><input id="hobbyINPUT2"></div>
                        <div class="eixoBotoes"><button onclick="executarInput2()">+</button></div>
                    </div>
                </div>
            </div>
            <div id="divBotaoTres" style="visibility: hidden; transition: all 1s;" class="moduloDash">
                <button id="botaoTres" onclick="mostrarBotoes()">+</button>
                <div id="div3" class="coisasModuloDash">
                    <div id="div3Titulo" class="eixoTitulo">
                        <p>Adicione um novo hobby</p>
                    </div>
                    <div class="eixo">
                        <div class="eixoInputs"><input id="hobbyINPUT3"></div>
                        <div class="eixoBotoes"><button onclick="executarInput3()">+</button></div>
                    </div>
                </div>
            </div>
            <div id="divBotaoQuatro" style="visibility: hidden; transition: all 1s;" class="moduloDash">
                <button id="botaoQuatro" onclick="mostrarBotoes()">+</button>
                <div id="div4" class="coisasModuloDash">
                    <div id="div4Titulo" class="eixoTitulo">
                        <p>Adicione um novo hobby</p>
                    </div>
                    <div class="eixo">
                        <div class="eixoInputs"><input id="hobbyINPUT4"></div>
                        <div class="eixoBotoes"><button onclick="executarInput4()">+</button></div>
                    </div>
                </div>
            </div>
            <div id="divBotaoCinco" style="visibility: hidden; transition: all 1s;" class="moduloDash">
                <button id="botaoCinco" onclick="mostrarBotoes()">+</button>
                <div id="div5" class="coisasModuloDash">
                    <div id="div5Titulo" class="eixoTitulo">
                        <p>Adicione um novo hobby</p>
                    </div>
                    <div class="eixo">
                        <div class="eixoInputs"><input id="hobbyINPUT5"></div>
                        <div class="eixoBotoes"><button onclick="executarInput5()">+</button></div>
                    </div>
                </div>
            </div>
            <div id="divBotaoSeis" style="visibility: hidden; transition: all 1s;" class="moduloDash">
                <button id="botaoSeis" onclick="mostrarBotoes()">+</button>
                <div id="div6" class="coisasModuloDash">
                    <div id="div6Titulo" class="eixoTitulo">
                        <p>Adicione um novo hobby</p>
                    </div>
                    <div class="eixo">
                        <div class="eixoInputs"><input id="hobbyINPUT6"></div>
                        <div class="eixoBotoes"><button onclick="executarInput6()">+</button></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- <div class="sessaoDois"></div>
    <div class="sessaoTres"></div> -->
    <div class="footer">
        <img src="../assets/HobbizDegrade.png" alt="">
        <p>©Copyright 2022 - Todos os direitos reservados, Hobbiz</p>
    </div>
</body>

</html>
<script>
    var novoHobby
    var card
    var titulo
    var quando 
    var horasDedicadas
    var hoje = new Date()

    var fkUsuario = Number(sessionStorage.ID_USUARIO)

    if (sessionStorage.ID_USUARIO != null) {
        nomeUsuario.innerHTML = `<p>${sessionStorage.NOME_USUARIO}</p>`
    }

    function mostrarBotoes() {
        if (divBotaoDois.style.visibility == "hidden") {
            divBotaoDois.style = "visibility: visible;";
            botaoUm.style.display = "none"
            divBotaoUm.style = "background-color: #bfe3f1;"
            div1.style.display = "flex"
        } else if (divBotaoTres.style.visibility == "hidden") {
            divBotaoTres.style = "visibility: visible;";
            botaoDois.style.display = "none"
            divBotaoDois.style = "background-color: #bfe3f1;"
            div2.style.display = "flex"
        } else if (divBotaoQuatro.style.visibility == "hidden") {
            divBotaoQuatro.style = "visibility: visible;";
            botaoTres.style.display = "none"
            divBotaoTres.style = "background-color: #bfe3f1;"
            div3.style.display = "flex"
        } else if (divBotaoCinco.style.visibility == "hidden") {
            divBotaoCinco.style = "visibility: visible;";
            botaoQuatro.style.display = "none"
            divBotaoQuatro.style = "background-color: #bfe3f1;"
            div4.style.display = "flex"
        } else if (divBotaoSeis.style.visibility == "hidden") {
            divBotaoSeis.style = "visibility: visible;";
            botaoCinco.style.display = "none"
            divBotaoCinco.style = "background-color: #bfe3f1;"
            div5.style.display = "flex"
        } else if (divBotaoSeis.style.visibility == "visible") {
            botaoSeis.style.display = "none"
            divBotaoSeis.style = "background-color: #bfe3f1;"
            div6.style.display = "flex"
        } else {

        }
    }

    function executarInput1() {
        novoHobby = hobbyINPUT1.value
        var dia = diaINPUT1.value
        var hora = horaINPUT1.value
        var duracao = duracaoINPUT1.value

        if (novoHobby.length < 1 || novoHobby.trim().length === 0) {
            alert('Insira um Hobby válido')
            hobbyINPUT1.style.border = "1px solid red";
        } else if (duracao.length != 4 || isNaN(duracao) || duracao < 5) {
            alert('Duração deve conter o formato HH MM e de 5 minutos pra cima')
            duracaoINPUT1.style.border = "1px solid red";
        } else if (dia.length != 8 || isNaN(dia)) {
            alert('Formato da data é AAAA MM DD')
            diaINPUT1.style.border = "1px solid red";
        } else if (hora.length != 4 || isNaN(dia)) {
            alert('Formato do horario é HH MM')
            horaINPUT1.style.border = "1px solid red";
        } else {
            horasDedicadas = duracao * 100
            quando = horasDedicadas.toString() + hora.toString()
            hobbyINPUT1.style.border = "none";
            card = 1
            titulo = novoHobby
            div1Titulo.innerHTML = `<p>${novoHobby}</p>`
            div1Titulo.style = "background-image: radial-gradient(#975acc, #662B99);"
            hobbyINPUT1.value = ""
            cadastrarHobby()
        }
    }
    function executarInput2() {
        novoHobby = hobbyINPUT2.value
        if (novoHobby.length < 1 || novoHobby.trim().length === 0) {
            alert('Insira um Hobby válido')
        } else {
            card = 2
            titulo = novoHobby
            div2Titulo.innerHTML = `<p>${novoHobby}</p>`
            div2Titulo.style = "background-image: radial-gradient(#975acc, #662B99);"
            hobbyINPUT2.value = ""
            cadastrarHobby()
        }
    }
    function executarInput3() {
        novoHobby = hobbyINPUT3.value
        if (novoHobby.length < 1 || novoHobby.trim().length === 0) {
            alert('Insira um Hobby válido')
        } else {
            card = 3
            titulo = novoHobby
            div3Titulo.innerHTML = `<p>${novoHobby}</p>`
            div3Titulo.style = "background-image: radial-gradient(#975acc, #662B99);"
            hobbyINPUT3.value = ""
            cadastrarHobby()
        }
    }
    function executarInput4() {
        novoHobby = hobbyINPUT4.value
        if (novoHobby.length < 1 || novoHobby.trim().length === 0) {
            alert('Insira um Hobby válido')
        } else {
            card = 4
            titulo = novoHobby
            div4Titulo.innerHTML = `<p>${novoHobby}</p>`
            div4Titulo.style = "background-image: radial-gradient(#975acc, #662B99);"
            hobbyINPUT4.value = ""
            cadastrarHobby()
        }
    }
    function executarInput5() {
        novoHobby = hobbyINPUT5.value
        if (novoHobby.length < 1 || novoHobby.trim().length === 0) {
            alert('Insira um Hobby válido')
        } else {
            card = 5
            titulo = novoHobby
            div5Titulo.innerHTML = `<p>${novoHobby}</p>`
            div5Titulo.style = "background-image: radial-gradient(#975acc, #662B99);"
            hobbyINPUT5.value = ""
            cadastrarHobby()
        }
    }
    function executarInput6() {
        novoHobby = hobbyINPUT6.value
        if (novoHobby.length < 1 || novoHobby.trim().length === 0) {
            alert('Insira um Hobby válido')
        } else {
            card = 6
            titulo = novoHobby
            div6Titulo.innerHTML = `<p>${novoHobby}</p>`
            div6Titulo.style = "background-image: radial-gradient(#975acc, #662B99);"
            hobbyINPUT6.value = ""
            cadastrarHobby()
        }
    }

    /*          sessionStorage.setItem('HOBBY_USUARIO6', novoHobby);
                HOBBY_USUARIO6 = sessionStorage.HOBBY_USUARIO6; */


    function cadastrarHobby() {

        fetch("/usuarios/dashboard", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                fkUsuario: fkUsuario,
                card: card,
                titulo: titulo,
                quando: quando,
                horasDedicadas: horasDedicadas
            })
        })
        horasDedicadas = ''
    }

</script>